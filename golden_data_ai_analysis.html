<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CardioWatch 287-2B - Golden Data AI Analysis Report</title>
<style>
    :root {
        --primary: #1a365d;
        --primary-light: #2b6cb0;
        --success: #276749;
        --success-bg: #c6f6d5;
        --warn: #744210;
        --warn-bg: #fefcbf;
        --fail: #9b2c2c;
        --fail-bg: #fed7d7;
        --info: #2c5282;
        --info-bg: #bee3f8;
        --border: #e2e8f0;
        --bg-alt: #f7fafc;
        --text: #2d3748;
        --text-light: #718096;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        color: var(--text);
        line-height: 1.6;
        background: #fff;
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px 30px;
    }
    header {
        background: linear-gradient(135deg, var(--primary), var(--primary-light));
        color: white;
        padding: 30px 40px;
        border-radius: 8px;
        margin-bottom: 30px;
    }
    header h1 { font-size: 1.8em; margin-bottom: 5px; }
    header p { opacity: 0.9; font-size: 0.95em; }
    .meta-row {
        display: flex;
        gap: 30px;
        margin-top: 15px;
        font-size: 0.85em;
        opacity: 0.85;
    }
    h2 {
        color: var(--primary);
        border-bottom: 2px solid var(--primary);
        padding-bottom: 8px;
        margin: 30px 0 15px;
        font-size: 1.4em;
    }
    h3 { color: var(--primary-light); margin: 20px 0 10px; font-size: 1.15em; }
    h4 { color: var(--text); margin: 15px 0 8px; font-size: 1.05em; }

    /* Summary cards */
    .summary-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
        margin: 20px 0;
    }
    .card {
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        border: 1px solid var(--border);
    }
    .card .number { font-size: 2.5em; font-weight: bold; }
    .card .label { font-size: 0.85em; color: var(--text-light); margin-top: 5px; }
    .card-pass { background: var(--success-bg); }
    .card-pass .number { color: var(--success); }
    .card-warn { background: var(--warn-bg); }
    .card-warn .number { color: var(--warn); }
    .card-fail { background: var(--fail-bg); }
    .card-fail .number { color: var(--fail); }
    .card-total { background: var(--info-bg); }
    .card-total .number { color: var(--info); }

    /* Tables */
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
        font-size: 0.88em;
    }
    th {
        background: var(--primary);
        color: white;
        padding: 10px 8px;
        text-align: left;
        font-weight: 600;
        font-size: 0.85em;
        white-space: nowrap;
    }
    td {
        padding: 8px;
        border-bottom: 1px solid var(--border);
        vertical-align: top;
    }
    tr:nth-child(even) { background: var(--bg-alt); }
    tr:hover { background: #edf2f7; }

    /* Verdict badges */
    .badge {
        display: inline-block;
        padding: 2px 10px;
        border-radius: 12px;
        font-size: 0.8em;
        font-weight: 600;
        text-transform: uppercase;
    }
    .badge-pass { background: var(--success-bg); color: var(--success); }
    .badge-warn { background: var(--warn-bg); color: var(--warn); }
    .badge-fail { background: var(--fail-bg); color: var(--fail); }
    .badge-ok { background: #e9d8fd; color: #553c9a; }
    .badge-na { background: #e2e8f0; color: #718096; }

    /* Bug cards */
    .bug-card {
        border: 1px solid var(--border);
        border-radius: 8px;
        margin: 15px 0;
        overflow: hidden;
    }
    .bug-header {
        padding: 12px 18px;
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .bug-p1 .bug-header { background: var(--fail-bg); color: var(--fail); border-left: 4px solid var(--fail); }
    .bug-p2 .bug-header { background: var(--warn-bg); color: var(--warn); border-left: 4px solid #d69e2e; }
    .bug-p3 .bug-header { background: var(--info-bg); color: var(--info); border-left: 4px solid var(--info); }
    .bug-body { padding: 15px 18px; }
    .bug-body dt { font-weight: 600; margin-top: 8px; color: var(--primary); }
    .bug-body dd { margin-left: 15px; margin-bottom: 5px; }

    /* Code blocks */
    code {
        background: #edf2f7;
        padding: 1px 5px;
        border-radius: 3px;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.9em;
    }
    pre {
        background: #1a202c;
        color: #e2e8f0;
        padding: 15px;
        border-radius: 6px;
        overflow-x: auto;
        font-size: 0.85em;
        margin: 10px 0;
        line-height: 1.5;
    }
    pre code { background: none; color: inherit; padding: 0; }

    /* Sections */
    .section { margin: 25px 0; }
    .finding-box {
        background: var(--bg-alt);
        border-left: 4px solid var(--primary-light);
        padding: 12px 18px;
        margin: 10px 0;
        border-radius: 0 6px 6px 0;
    }
    .alert-box {
        padding: 12px 18px;
        border-radius: 6px;
        margin: 10px 0;
    }
    .alert-fail { background: var(--fail-bg); border-left: 4px solid var(--fail); }
    .alert-warn { background: var(--warn-bg); border-left: 4px solid #d69e2e; }
    .alert-info { background: var(--info-bg); border-left: 4px solid var(--info); }

    /* Priority tags */
    .priority {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.75em;
        font-weight: 700;
    }
    .p1 { background: var(--fail); color: white; }
    .p2 { background: #d69e2e; color: white; }
    .p3 { background: var(--info); color: white; }

    /* Links bar */
    .nav-links {
        display: flex;
        gap: 20px;
        margin: 15px 0;
        padding: 12px 18px;
        background: var(--bg-alt);
        border-radius: 6px;
    }
    .nav-links a {
        color: var(--primary-light);
        text-decoration: none;
        font-weight: 500;
    }
    .nav-links a:hover { text-decoration: underline; }

    footer {
        margin-top: 40px;
        padding: 20px;
        border-top: 1px solid var(--border);
        text-align: center;
        color: var(--text-light);
        font-size: 0.85em;
    }

    .category-header {
        background: var(--primary);
        color: white;
        padding: 5px 12px;
        border-radius: 4px;
        font-size: 0.8em;
        display: inline-block;
        margin: 2px 0;
    }

    .ratio-highlight {
        background: var(--fail-bg);
        padding: 1px 6px;
        border-radius: 3px;
        font-weight: 600;
        color: var(--fail);
    }

    .toc {
        background: var(--bg-alt);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 20px 25px;
        margin: 20px 0;
    }
    .toc ol { padding-left: 20px; }
    .toc li { margin: 5px 0; }
    .toc a { color: var(--primary-light); text-decoration: none; }
    .toc a:hover { text-decoration: underline; }

    @media print {
        body { max-width: none; padding: 10px; }
        header { break-after: avoid; }
        .bug-card { break-inside: avoid; }
        pre { white-space: pre-wrap; }
    }
</style>
</head>
<body>

<header>
    <h1>Golden Data AI Analysis Report</h1>
    <p>CardioWatch 287-2B Firmware &mdash; Deep Root-Cause Analysis of 40 Clinical Scenarios</p>
    <div class="meta-row">
        <span>Date: 2026-02-12</span>
        <span>MCU: nRF52840</span>
        <span>PPG: MAX86178 (Green/Red/IR)</span>
        <span>ACC: LIS2DW12</span>
        <span>Sampling: 32 Hz</span>
    </div>
</header>

<nav class="nav-links">
    <a href="golden_data_analysis.html">Automated Analysis Report</a>
    <a href="golden_data_viewer.html">Interactive Data Viewer</a>
</nav>

<div class="toc">
    <strong>Table of Contents</strong>
    <ol>
        <li><a href="#executive-summary">Executive Summary</a></li>
        <li><a href="#overview-table">Overview Table &mdash; All 40 Scenarios</a></li>
        <li><a href="#bugs-identified">Bugs Identified (3 Open, 5 Fixed, 2 Test Config)</a></li>
        <li><a href="#spo2-analysis">SpO2 Detailed Analysis</a></li>
        <li><a href="#hr-analysis">HR Detailed Analysis</a></li>
        <li><a href="#cardiac-arrest-analysis">Cardiac Arrest Detection Analysis</a></li>
        <li><a href="#results-by-category">Results by Category</a></li>
        <li><a href="#recommendations">Recommendations</a></li>
        <li><a href="#impact-matrix">Impact Matrix</a></li>
    </ol>
</div>

<!-- ============================================================ -->
<!-- 1. EXECUTIVE SUMMARY -->
<!-- ============================================================ -->
<section id="executive-summary">
<h2>1. Executive Summary</h2>

<div class="summary-grid">
    <div class="card card-total">
        <div class="number">40</div>
        <div class="label">Total Scenarios</div>
    </div>
    <div class="card card-pass">
        <div class="number">32</div>
        <div class="label">PASS (80.0%)</div>
    </div>
    <div class="card card-warn">
        <div class="number">8</div>
        <div class="label">WARN (20.0%)</div>
    </div>
    <div class="card card-fail">
        <div class="number">0</div>
        <div class="label">FAIL (0%)</div>
    </div>
</div>

<div class="alert-box alert-warn">
    <strong>Primary Remaining Issue &mdash; Cardiac Arrest Detection:</strong> A <strong>watchdog timer initialization bug</strong> causes spurious <code>Cardiac Alarm4 ON</code> at startup in all cardiac arrest scenarios (21-24). The alarm fires with a bogus silence duration of ~1.7 billion seconds (Unix timestamp treated as duration). This corrupts the alarm state: in scenarios 21, 22, 24 the alarm is already ON from startup (masking real detection), and in scenario 23 it creates an ON/OFF oscillation loop (815 cycles). HR continues to be reported (50-177 bpm) during all arrest types.
</div>

<div class="alert-box alert-warn">
    <strong>HR Doubling Partially Fixed:</strong> BUG-3 (dicrotic notch doubling) is now <strong>resolved for HR &ge; 42 bpm</strong> &mdash; scenarios 18 (42 bpm) and 33 (55 bpm) now PASS. However, it persists for very low HR &lt; 35 bpm: scenarios 20 (33 bpm, ratio 1.72) and 34 (35 bpm, ratio 1.64) still show partial doubling, limited by the slew rate limiter.
</div>

<h3>Key Findings</h3>
<ul>
    <li><strong>Significant improvement vs previous run:</strong> 32 PASS / 8 WARN / 0 FAIL (was 30 PASS / 5 WARN / 5 FAIL). Zero FAILs for the first time.</li>
    <li><strong>5 previously failing scenarios now PASS:</strong> 18_bradycardia (HR 42.3 vs 42), 33_hypothermia_32C (HR 55.4 vs 55), 06_hypoxia_severe (SpO2 74.1 vs 72), 04_hypoxia_mild (SpO2 92.9 vs 92), 32_hemorrhagic_shock (SpO2 96.9 vs 96)</li>
    <li><strong>P1 (Patient Safety):</strong> NEW watchdog timer bug causes spurious alarm state in all cardiac arrest scenarios. VF/VT blindness persists (scenarios 21, 22). HR reported during arrest (50-177 bpm when it should be 0).</li>
    <li><strong>P2 (Algorithm):</strong> BUG-3 partially fixed &mdash; still affects very low HR (&lt; 35 bpm). SpO2 biases largely resolved.</li>
    <li><strong>P3 (Test Config):</strong> 2 false WARNs from incorrect expected values &mdash; scenario 37 (HR: 75&rarr;55) and scenario 26 (SpO2: 96&rarr;92). Firmware measures correctly in both cases.</li>
</ul>
</section>

<!-- ============================================================ -->
<!-- 2. OVERVIEW TABLE -->
<!-- ============================================================ -->
<section id="overview-table">
<h2>2. Overview Table &mdash; All 40 Scenarios</h2>

<table>
<thead>
<tr>
    <th>#</th>
    <th>Scenario</th>
    <th>Category</th>
    <th>HR Exp</th>
    <th>HR Meas</th>
    <th>HR &Delta;</th>
    <th>HR V</th>
    <th>SpO2 Exp</th>
    <th>SpO2 Meas</th>
    <th>SpO2 &Delta;</th>
    <th>SpO2 V</th>
    <th>Score</th>
    <th>Root Cause</th>
</tr>
</thead>
<tbody>
<tr><td>01</td><td>normal_rest</td><td><span class="category-header">Rest</span></td><td>70</td><td>70.9</td><td>0.9</td><td><span class="badge badge-pass">PASS</span></td><td>98</td><td>99.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>02</td><td>elderly_rest</td><td><span class="category-header">Rest</span></td><td>65</td><td>75.7</td><td>10.7</td><td><span class="badge badge-ok">OK</span></td><td>96</td><td>97.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>03</td><td>athlete_rest</td><td><span class="category-header">Rest</span></td><td>52</td><td>47.9</td><td>4.1</td><td><span class="badge badge-pass">PASS</span></td><td>99</td><td>99.0</td><td>0.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>04</td><td>hypoxia_mild</td><td><span class="category-header">Hypoxia</span></td><td>95</td><td>96.8</td><td>1.8</td><td><span class="badge badge-pass">PASS</span></td><td>92</td><td>92.9</td><td>0.9</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>05</td><td>hypoxia_moderate</td><td><span class="category-header">Hypoxia</span></td><td>110</td><td>118.1</td><td>8.1</td><td><span class="badge badge-pass">PASS</span></td><td>85</td><td>83.1</td><td>1.9</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>06</td><td>hypoxia_severe</td><td><span class="category-header">Hypoxia</span></td><td>140</td><td>144.4</td><td>4.4</td><td><span class="badge badge-pass">PASS</span></td><td>72</td><td>74.1</td><td>2.1</td><td><span class="badge badge-ok">OK</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>07</td><td>walking</td><td><span class="category-header">Activity</span></td><td>100</td><td>105.2</td><td>5.2</td><td><span class="badge badge-pass">PASS</span></td><td>97</td><td>0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>08</td><td>running</td><td><span class="category-header">Activity</span></td><td>165</td><td>171.0</td><td>6.0</td><td><span class="badge badge-pass">PASS</span></td><td>96</td><td>0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>09</td><td>wrist_movement</td><td><span class="category-header">Activity</span></td><td>var</td><td>101.9</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>var</td><td>98.0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>10</td><td>af_rapid</td><td><span class="category-header">Arrhythmias</span></td><td>130</td><td>129.5</td><td>0.5</td><td><span class="badge badge-pass">PASS</span></td><td>96</td><td>97.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>11</td><td>af_controlled</td><td><span class="category-header">Arrhythmias</span></td><td>75</td><td>72.0</td><td>3.0</td><td><span class="badge badge-pass">PASS</span></td><td>97</td><td>97.0</td><td>0.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>12</td><td>flutter_2_1</td><td><span class="category-header">Arrhythmias</span></td><td>150</td><td>158.4</td><td>8.4</td><td><span class="badge badge-pass">PASS</span></td><td>96</td><td>97.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>13</td><td>esv_bigeminy</td><td><span class="category-header">Arrhythmias</span></td><td>80</td><td>81.1</td><td>1.1</td><td><span class="badge badge-pass">PASS</span></td><td>97</td><td>97.8</td><td>0.8</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>14</td><td>esv_trigeminy</td><td><span class="category-header">Arrhythmias</span></td><td>80</td><td>80.8</td><td>0.8</td><td><span class="badge badge-pass">PASS</span></td><td>97</td><td>98.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>15</td><td>psvt_episodes</td><td><span class="category-header">Arrhythmias</span></td><td>var</td><td>72.2</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>96</td><td>98.0</td><td>2.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>16</td><td>vt_monomorphic</td><td><span class="category-header">Arrhythmias</span></td><td>180</td><td>185.6</td><td>5.6</td><td><span class="badge badge-pass">PASS</span></td><td>var</td><td>89.4</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>17</td><td>torsades</td><td><span class="category-header">Arrhythmias</span></td><td>var</td><td>178.7</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>var</td><td>0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>18</td><td>bradycardia</td><td><span class="category-header">Bradycardia</span></td><td>42</td><td>42.3</td><td>0.3</td><td><span class="badge badge-pass">PASS</span></td><td>97</td><td>98.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>BUG-3 <strong style="color:var(--success);">FIXED</strong></td></tr>
<tr><td>19</td><td>bav2_mobitz1</td><td><span class="category-header">Bradycardia</span></td><td>var</td><td>49.9</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>97</td><td>98.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr style="background: var(--warn-bg);">
    <td>20</td><td>bav3_complete</td><td><span class="category-header">Bradycardia</span></td><td>33</td><td>56.7</td><td>23.7</td><td><span class="badge badge-warn">WARN</span></td><td>96</td><td>95.8</td><td>0.2</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-warn">WARN</span></td><td>BUG-3 (ratio <span class="ratio-highlight">1.72</span>)</td>
</tr>
<tr style="background: var(--warn-bg);">
    <td>21</td><td>vf_from_sinus</td><td><span class="category-header">Cardiac Arrest</span></td><td>75&rarr;VF</td><td>80.5</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>var</td><td>97.7</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-warn">WARN</span></td><td>Watchdog + VF blindness</td>
</tr>
<tr style="background: var(--warn-bg);">
    <td>22</td><td>vt_to_vf</td><td><span class="category-header">Cardiac Arrest</span></td><td>var</td><td>86.9</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>var</td><td>97.6</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-warn">WARN</span></td><td>Watchdog + VT/VF blindness</td>
</tr>
<tr style="background: var(--warn-bg);">
    <td>23</td><td>asystole</td><td><span class="category-header">Cardiac Arrest</span></td><td>var</td><td>51.7</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>var</td><td>96.0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-warn">WARN</span></td><td>Watchdog oscillation (815x)</td>
</tr>
<tr style="background: var(--warn-bg);">
    <td>24</td><td>pea</td><td><span class="category-header">Cardiac Arrest</span></td><td>80&rarr;PEA</td><td>80.4</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>var</td><td>98.0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-warn">WARN</span></td><td>Watchdog spurious alarm</td>
</tr>
<tr><td>25</td><td>progressive_deterioration</td><td><span class="category-header">Transitional</span></td><td>var</td><td>101.8</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>var</td><td>81.1</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr style="background: var(--warn-bg);">
    <td>26</td><td>hf_pulsus_alternans</td><td><span class="category-header">Cardiac Path</span></td><td>110</td><td>112.8</td><td>2.8</td><td><span class="badge badge-pass">PASS</span></td><td>96</td><td>91.9</td><td>4.1</td><td><span class="badge badge-warn">WARN</span></td><td><span class="badge badge-warn">WARN</span></td><td>Test config (exp should be 92)</td>
</tr>
<tr><td>27</td><td>hf_cheyne_stokes</td><td><span class="category-header">Cardiac Path</span></td><td>85</td><td>92.4</td><td>7.4</td><td><span class="badge badge-pass">PASS</span></td><td>var</td><td>92.0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>28</td><td>aortic_stenosis</td><td><span class="category-header">Cardiac Path</span></td><td>75</td><td>81.1</td><td>6.1</td><td><span class="badge badge-pass">PASS</span></td><td>97</td><td>98.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>29</td><td>aortic_regurgitation</td><td><span class="category-header">Cardiac Path</span></td><td>80</td><td>86.4</td><td>6.4</td><td><span class="badge badge-pass">PASS</span></td><td>97</td><td>98.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>30</td><td>tamponade</td><td><span class="category-header">Cardiac Path</span></td><td>115</td><td>118.2</td><td>3.2</td><td><span class="badge badge-pass">PASS</span></td><td>var</td><td>97.0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>31</td><td>hcm</td><td><span class="category-header">Cardiac Path</span></td><td>70</td><td>75.8</td><td>5.8</td><td><span class="badge badge-pass">PASS</span></td><td>97</td><td>98.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>32</td><td>hemorrhagic_shock</td><td><span class="category-header">Extreme</span></td><td>130</td><td>134.3</td><td>4.3</td><td><span class="badge badge-pass">PASS</span></td><td>96</td><td>96.9</td><td>0.9</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>33</td><td>hypothermia_32C</td><td><span class="category-header">Extreme</span></td><td>55</td><td>55.4</td><td>0.4</td><td><span class="badge badge-pass">PASS</span></td><td>94</td><td>0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>BUG-3 <strong style="color:var(--success);">FIXED</strong></td></tr>
<tr style="background: var(--warn-bg);">
    <td>34</td><td>hypothermia_28C</td><td><span class="category-header">Extreme</span></td><td>35</td><td>57.3</td><td>22.3</td><td><span class="badge badge-warn">WARN</span></td><td>90</td><td>0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-warn">WARN</span></td><td>BUG-3 (ratio <span class="ratio-highlight">1.64</span>)</td>
</tr>
<tr><td>35</td><td>sleep_apnea</td><td><span class="category-header">Extreme</span></td><td>60</td><td>59.0</td><td>1.0</td><td><span class="badge badge-pass">PASS</span></td><td>var</td><td>96.1</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>36</td><td>vasovagal_syncope</td><td><span class="category-header">Extreme</span></td><td>var</td><td>78.9</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td>var</td><td>98.0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr style="background: var(--warn-bg);">
    <td>37</td><td>venous_pooling</td><td><span class="category-header">Extreme</span></td><td>75</td><td>55.7</td><td>19.3</td><td><span class="badge badge-warn">WARN</span></td><td>97</td><td>94.0</td><td>3.0</td><td><span class="badge badge-ok">OK</span></td><td><span class="badge badge-warn">WARN</span></td><td>Test config (exp HR should be 55)</td>
</tr>
<tr><td>38</td><td>severe_anemia</td><td><span class="category-header">Extreme</span></td><td>110</td><td>112.6</td><td>2.6</td><td><span class="badge badge-pass">PASS</span></td><td>var</td><td>99.0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>39</td><td>parkinsonian_tremor</td><td><span class="category-header">Extreme</span></td><td>70</td><td>71.1</td><td>1.1</td><td><span class="badge badge-pass">PASS</span></td><td>97</td><td>0</td><td>&mdash;</td><td><span class="badge badge-na">N/A</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
<tr><td>40</td><td>co_poisoning</td><td><span class="category-header">Extreme</span></td><td>110</td><td>112.7</td><td>2.7</td><td><span class="badge badge-pass">PASS</span></td><td>99</td><td>99.0</td><td>0.0</td><td><span class="badge badge-pass">PASS</span></td><td><span class="badge badge-pass">PASS</span></td><td>&mdash;</td></tr>
</tbody>
</table>
<p style="font-size:0.85em; color:var(--text-light);">Note: Scenarios 26 and 37 show false WARNs due to incorrect expected values in the analysis script (26: SpO2 exp 96 should be 92; 37: HR exp 75 should be 55). Firmware measures correctly in both cases. Scenarios 18 and 33 previously FAIL with BUG-3 HR doubling &mdash; now PASS.</p>
</section>

<!-- ============================================================ -->
<!-- 3. BUGS IDENTIFIED -->
<!-- ============================================================ -->
<section id="bugs-identified">
<h2>3. Bugs Identified</h2>
<p>8 bugs tracked: 5 previously known, 3 newly discovered. <strong>3 open, 5 fixed.</strong> Additionally, 2 test configuration errors identified (not firmware bugs). Major improvement: BUG-3 partially fixed, SpO2 biases resolved. New: watchdog timer initialization bug in cardiac arrest detection.</p>

<!-- NEW: Watchdog Timer Bug -->
<div class="bug-card bug-p1">
    <div class="bug-header">
        <span>NEW: Cardiac Arrest Watchdog Timer Initialization Bug</span>
        <span class="priority p1">P1 &mdash; PATIENT SAFETY</span>
    </div>
    <div class="bug-body">
        <dl>
            <dt>Symptom</dt>
            <dd>All 4 cardiac arrest scenarios (21-24) fire <code>Cardiac Alarm4 ON (watchdog)</code> at startup with a bogus silence duration of ~1,735,689,601 seconds (~55 years). This is a Unix timestamp being treated as a duration. The alarm fires before the simulation begins producing meaningful data, corrupting the alarm state for the entire run.</dd>
            <dt>Affected Scenarios</dt>
            <dd>
                <strong>21 (VF):</strong> Alarm already ON from startup, never turns OFF. 553 "recovery rejected" messages. Masks real VF detection failure.<br>
                <strong>22 (VT&rarr;VF):</strong> Alarm already ON from startup, never turns OFF. 614 "recovery rejected" messages. Zero below-thresh messages.<br>
                <strong>23 (Asystole):</strong> <strong>Worst case</strong> &mdash; alarm oscillates ON/OFF <strong>815 times</strong> during the 1-hour simulation. The watchdog fires Alarm4 ON, then 8 consecutive above-threshold peaks (from slow bradycardia at 30-50 bpm) pass the recovery check (inter-peak timing 1-2s falls within 0.3-2.0s window), turning alarm OFF. Watchdog immediately re-fires. This cycle repeats 815 times, preventing any sustained alarm state even during actual asystole.<br>
                <strong>24 (PEA):</strong> Alarm already ON from startup. 582 "recovery rejected" messages. Only 2 below-thresh messages.
            </dd>
            <dt>Root Cause</dt>
            <dd>In <code>corsano_cardiac_arrest.c</code>, the watchdog at line ~135 computes <code>silence_duration = current_time - last_peak_callback_time</code>. The <code>last_peak_callback_time</code> is set from the first peak callback using a value derived from the Unix epoch (~1.7 billion). Before the first peak callback properly initializes this variable, the watchdog sees an enormous silence duration and fires immediately. The guard at line ~127 (<code>if (last_peak_callback_time == 0) return;</code>) does not prevent this because the peak callback fires with a near-zero or epoch-based timestamp before the simulation time is properly initialized.
<pre><code>// Line 52 of every cardiac arrest scenario log:
Cardiac Alarm4 ON (watchdog 1735689601s silence)!
// This fires BEFORE any meaningful PPG data is processed</code></pre>
            </dd>
            <dt>Fix</dt>
            <dd>Initialize <code>last_peak_callback_time</code> to <code>TIME_SECONDS()</code> when cardiac monitoring starts (not from the first peak callback value). Add a startup grace period of 30-60 seconds before enabling watchdog checks. Add a cooldown period after Alarm4 triggers to prevent oscillation with the recovery mechanism.</dd>
        </dl>
    </div>
</div>

<!-- VF/VT Detection Blindness -->
<div class="bug-card bug-p1">
    <div class="bug-header">
        <span>VF/VT Amplitude Exceeds Detection Threshold &mdash; Algorithm Blind to Lethal Arrhythmias</span>
        <span class="priority p1">P1 &mdash; PATIENT SAFETY</span>
    </div>
    <div class="bug-body">
        <dl>
            <dt>Symptom</dt>
            <dd>Scenarios 21 (VF) and 22 (VT&rarr;VF): the cardiac arrest detector cannot independently detect VF or VT. VF produces chaotic high-amplitude PPG oscillations with <code>amplitude_difference > 75</code> (the detection threshold). VT produces fast regular high-amplitude peaks (amp=444-461). The amplitude-based below-threshold branch is rarely or never entered. Note: the spurious watchdog alarm coincidentally keeps the alarm ON, masking the underlying detection failure.</dd>
            <dt>Evidence</dt>
            <dd>
<pre><code>// Scenario 21 (VF from sinus):
// Only 4 "below thresh" messages (max 8.2s, below 10s minimum)
// Green avg amp during VF: 28-45 (below threshold)
// BUT: spurious watchdog alarm already ON → below-threshold logic cannot fire
// HR reported: 76→115→128→137→140 during VF phase

// Scenario 22 (VT→VF):
// VT phase: green avg amp 444-461 (ABOVE threshold 75!)
// VF phase: green avg amp 28-38 (below threshold)
// Zero "below thresh" messages total
// HR reported: 81→85→104→154→177 during VT/VF</code></pre>
            </dd>
            <dt>Root Cause</dt>
            <dd>The cardiac arrest algorithm at <code>corsano_cardiac_arrest.c</code> uses an amplitude threshold of 75. VT produces organized ventricular contractions with strong PPG pulsations well above this threshold. The algorithm fundamentally cannot distinguish VT from sinus tachycardia based solely on PPG amplitude. During VF, the chaotic signal may briefly drop below threshold, but the spurious watchdog alarm state prevents the amplitude-based path from firing independently.</dd>
            <dt>Fix</dt>
            <dd>New detection modalities needed:
            <ol style="margin: 8px 0 0 20px;">
                <li><strong>Waveform regularity analysis:</strong> VF has inter-peak timing CV &gt; 50% vs normal rhythm CV &lt; 15%</li>
                <li><strong>Frequency-domain VF classifier:</strong> VF dominant frequency 4-8 Hz with broad spectral spread vs narrow 0.8-3 Hz for normal PPG</li>
                <li><strong>Green amplitude collapse:</strong> When avg amp drops from ~800 to &lt; 100, flag potential arrest regardless of peak detection</li>
            </ol>
            </dd>
        </dl>
    </div>
</div>

<!-- HR Reporting During Arrest -->
<div class="bug-card bug-p1">
    <div class="bug-header">
        <span>HR Continues Reporting During Cardiac Arrest (All Scenarios)</span>
        <span class="priority p1">P1 &mdash; PATIENT SAFETY</span>
    </div>
    <div class="bug-body">
        <dl>
            <dt>Symptom</dt>
            <dd>All 4 cardiac arrest scenarios report HR 50-177 bpm during arrest phases when green avg amp has dropped to 28-47 (normal ~800). The PSP/internal HR algorithm does not cross-check against PPG amplitude quality.</dd>
            <dt>Evidence</dt>
            <dd>
                <table>
                    <tr><th>Scenario</th><th>Arrest Type</th><th>HR During Arrest</th><th>Green Amp</th><th>Expected HR</th></tr>
                    <tr><td>21_vf_from_sinus</td><td>VF</td><td>115-140 bpm</td><td>28-45</td><td>0</td></tr>
                    <tr><td>22_vt_to_vf</td><td>VT&rarr;VF</td><td>104-177 bpm</td><td>28-38 (VF), 444-461 (VT)</td><td>0</td></tr>
                    <tr><td>23_asystole</td><td>Asystole</td><td>50-96 bpm</td><td>32-47</td><td>0</td></tr>
                    <tr><td>24_pea</td><td>PEA</td><td>64-83 bpm</td><td>29-39</td><td>0</td></tr>
                </table>
            </dd>
            <dt>Fix</dt>
            <dd>When <code>green avg amp &lt; 100</code> for &gt; 10 seconds, suppress HR output (report 0 or indeterminate). Also suppress HR when <code>cardiac_arrest</code> state is active by checking <code>corsano_cardiac_get_state()</code> in the HR reporting logic at <code>mmt_process_fxi.c:~1628</code>.</dd>
        </dl>
    </div>
</div>

<!-- BUG-4 FIXED -->
<div class="bug-card bug-p1" style="opacity: 0.7;">
    <div class="bug-header" style="background: var(--success-bg); color: var(--success); border-left: 4px solid var(--success);">
        <span>BUG-4: Cardiac Arrest Alarm in Invalid-Pair Branch</span>
        <span class="badge badge-pass">FIXED</span>
    </div>
    <div class="bug-body">
        <dl>
            <dt>Symptom (resolved)</dt>
            <dd>The invalid-pair branch in the cardiac arrest detector never checked the alarm condition.</dd>
            <dt>Resolution</dt>
            <dd>Code fix at <code>corsano_cardiac_arrest.c:349-359</code> adds alarm check in the invalid-pair branch ("Cardiac Alarm3 ON"). FIX-2 recovery rejection logic prevents false alarm-OFF from noise peaks. BUG-5 fix comment confirmed at line 235. However, the <strong>new watchdog timer bug</strong> now corrupts the alarm state before these fixed paths can operate independently.</dd>
        </dl>
    </div>
</div>

<!-- BUG-5 FIXED -->
<div class="bug-card bug-p1" style="opacity: 0.7;">
    <div class="bug-header" style="background: var(--success-bg); color: var(--success); border-left: 4px solid var(--success);">
        <span>BUG-5: Shadowed Variable Prevents Gap-Based Alarm</span>
        <span class="badge badge-pass">FIXED</span>
    </div>
    <div class="bug-body">
        <dl>
            <dt>Symptom (resolved)</dt>
            <dd>Local variable <code>float last_peak_above_threshold = 0.0;</code> at line 233 shadowed the global at line 143.</dd>
            <dt>Resolution</dt>
            <dd>Source code comment confirms: <code>// BUG-5 FIX: removed local that shadowed global</code>. The global variable is now the only declaration.</dd>
        </dl>
    </div>
</div>

<!-- BUG-3 -->
<div class="bug-card bug-p2">
    <div class="bug-header">
        <span>BUG-3: HR Doubling by Dicrotic Notch (Partially Fixed &mdash; Still Affects HR &lt; 35 bpm)</span>
        <span class="priority p2">P2 &mdash; ALGORITHM</span>
    </div>
    <div class="bug-body">
        <dl>
            <dt>Status</dt>
            <dd><strong>Partially fixed.</strong> Scenarios 18 (42 bpm) and 33 (55 bpm) now PASS with accurate HR. Scenarios 20 (33 bpm) and 34 (35 bpm) still show partial doubling but with lower ratios than before (1.72 and 1.64 vs previous 2.145 and 2.006). The slew rate limiter at <code>mmt_vital_algorithms.c:3680-3688</code> prevents full doubling, causing the FFT to oscillate between the fundamental and 2nd harmonic.</dd>
            <dt>Current Affected Scenarios</dt>
            <dd>
                <table>
                    <tr><th>Scenario</th><th>Expected HR</th><th>Measured HR</th><th>Ratio</th><th>Std Dev</th><th>Previous</th></tr>
                    <tr style="background: var(--success-bg);">
                        <td>18_bradycardia</td><td>42</td><td>42.3</td><td>1.01</td><td>0.9</td><td style="text-decoration:line-through;">84.2 (2.005)</td>
                    </tr>
                    <tr style="background: var(--success-bg);">
                        <td>33_hypothermia_32C</td><td>55</td><td>55.4</td><td>1.01</td><td>0.9</td><td style="text-decoration:line-through;">108.2 (1.967)</td>
                    </tr>
                    <tr style="background: var(--warn-bg);">
                        <td>20_bav3_complete</td><td>33</td><td>56.7</td><td><span class="ratio-highlight">1.72</span></td><td>6.8</td><td>70.8 (2.145)</td>
                    </tr>
                    <tr style="background: var(--warn-bg);">
                        <td>34_hypothermia_28C</td><td>35</td><td>57.3</td><td><span class="ratio-highlight">1.64</span></td><td>6.8</td><td>70.2 (2.006)</td>
                    </tr>
                </table>
            </dd>
            <dt>Evidence (Scenarios 20, 34)</dt>
            <dd>Only 3 of 60 activity records contain HR values (5% detection rate). The slew rate limiter prevents the FFT from jumping instantly from ~35 to ~70 bpm, causing oscillation between fundamental and 2nd harmonic. HR values range from 49-65 (scenario 20) and 52-65 (scenario 34). Cardiac beat intervals confirm the true rate: ~1.7s = 35 bpm. Zero "NOTCH rejected" log messages &mdash; the time-domain dicrotic notch filter is not triggering despite the generator setting <code>notch_depth: 0.04</code>.
<pre><code>// Scenario 20 - Cardiac beat intervals confirm 35 bpm:
Cardiac below thresh 1.7 1.7.  // 1.7s intervals = 35.3 bpm
// But HR reported as 49-62 bpm (partial doubling, slew-limited)</code></pre>
            </dd>
            <dt>Root Cause</dt>
            <dd>For HR &lt; 35 bpm, the fundamental frequency (0.55-0.58 Hz) is heavily suppressed by the bandpass filter (cutoff 0.7 Hz, &gt;-10 dB attenuation) and falls below the FFT search floor (<code>LOW_BPM_50</code>). The 2nd harmonic passes unattenuated but the slew rate limiter now prevents instant locking to 2x, causing the oscillation pattern.</dd>
            <dt>Fix (3-level approach)</dt>
            <dd>
            <ol style="margin: 0 0 0 20px;">
                <li><strong>Lower bandpass filter cutoff</strong> (<code>mmt_vital_algorithms.c:283</code>): <code>lowcut=0.4 Hz</code> (24 bpm) instead of 0.7 Hz</li>
                <li><strong>Lower FFT search floor</strong> (<code>mmt_vital_algorithms.c:70</code>): <code>LOW_BPM_50</code> from 45.0 to 25.0</li>
                <li><strong>Add sub-harmonic checking</strong>: After finding FFT peak at f, check f/2. If <code>peak_at_f/2 / peak_at_f > 0.3</code>, report f/2</li>
            </ol>
            </dd>
        </dl>
    </div>
</div>

<!-- BUG-1 FIXED -->
<div class="bug-card bug-p2" style="opacity: 0.7;">
    <div class="bug-header" style="background: var(--success-bg); color: var(--success); border-left: 4px solid var(--success);">
        <span>BUG-1: SpO2 Per-Beat Bias and Selection Bias</span>
        <span class="badge badge-pass">FIXED</span>
    </div>
    <div class="bug-body">
        <dl>
            <dt>Symptom (resolved)</dt>
            <dd>Previously: SpO2 overestimated by +3-13 points across hypoxia scenarios. Scenario 04 (mild) delta=+3.4, scenario 06 (severe) delta=+13.3.</dd>
            <dt>Current Results</dt>
            <dd>Scenario 04: SpO2 92.9 vs 92 (delta 0.9, <strong>PASS</strong>). Scenario 05: SpO2 83.1 vs 85 (delta 1.9, <strong>PASS</strong>). Scenario 06: SpO2 74.1 vs 72 (delta 2.1, <strong>OK</strong>). All within tolerance. The SpO2 selection bias and rolling average convergence issues appear resolved.</dd>
        </dl>
    </div>
</div>

<!-- BUG-6 -->
<div class="bug-card bug-p3">
    <div class="bug-header">
        <span>BUG-6: Movement Detection Mismatch &mdash; mmt_idle_detection vs PSP Classifier</span>
        <span class="priority p3">P3 &mdash; SIMULATOR / FIRMWARE</span>
    </div>
    <div class="bug-body">
        <dl>
            <dt>Symptom</dt>
            <dd>Scenarios 33 and 39: SpO2=0 during entire simulation despite stationary subject. PSP classifier correctly classifies as REST, but <code>mmt_idle_detection</code> returns ACTIVE, causing 100% SpO2 movement rejection. This no longer causes a FAIL verdict (HR is now accurate), but SpO2 is still unavailable for shivering/tremor scenarios.</dd>
            <dt>Root Cause</dt>
            <dd>Two independent motion-detection systems use incompatible metrics. PSP uses per-second variance, <code>mmt_idle_detection.c:256-270</code> uses sum of sample-to-sample deltas. For 10 Hz shivering or Parkinsonian tremor, <code>sum_d_acc</code> far exceeds the ACTIVE threshold of 2,700.</dd>
            <dt>Impact</dt>
            <dd>SpO2 completely suppressed during shivering/tremor. No clinical verdict impact (scenarios 33, 39 still PASS on HR).</dd>
        </dl>
    </div>
</div>

<!-- Test Config Errors -->
<div class="bug-card bug-p3">
    <div class="bug-header">
        <span>Test Config: Wrong Expected Values in Analysis Script (2 False WARNs)</span>
        <span class="priority p3">P3 &mdash; TOOLING</span>
    </div>
    <div class="bug-body">
        <dl>
            <dt>Scenario 37 (venous_pooling)</dt>
            <dd>Expected HR in <code>analyze_golden_results.py</code> line 60 is <strong>75</strong>, but metadata and generator specify <strong>55 bpm</strong>. Measured: 55.7 bpm (delta 0.7 = PASS if corrected). The firmware is accurate.</dd>
            <dt>Scenario 26 (hf_pulsus_alternans)</dt>
            <dd>Expected SpO2 in the script is <strong>96</strong>, but the generator signal targets <strong>SpO2=92</strong> (R-ratio=0.7025). Measured: 91.9 (delta 0.1 from corrected target = PASS). The firmware correctly recovers SpO2 from the R-ratio using the tuned linear formula with slope_offset=-1.17. No venous pooling filter messages (BUG-2 not active, <code>sleep_recording=false</code>). The 64.6% SpO2 dropout rate is expected due to pulsus alternans weak beats failing quality checks.</dd>
            <dt>Fix</dt>
            <dd>In <code>analyze_golden_results.py</code>: change scenario 37 expected HR from 75 to 55, and scenario 26 expected SpO2 from 96 to 92.</dd>
        </dl>
    </div>
</div>

</section>

<!-- ============================================================ -->
<!-- 4. SpO2 DETAILED ANALYSIS -->
<!-- ============================================================ -->
<section id="spo2-analysis">
<h2>4. SpO2 Detailed Analysis</h2>

<h3>R-Ratio Verification</h3>
<p>SpO2 is computed from the ratio of ratios: <code>R = (AC_red/DC_red) / (AC_ir/DC_ir)</code>, then tuned linear: <code>SpO2 = 112.1152 + (-28.6318 + slope_offset) &times; R + spo2_offset</code> (legacy quadratic: <code>108.49 - 30.09*R - 0.031*R&sup2;</code>).</p>

<table>
    <thead>
    <tr><th>Scenario</th><th>Target SpO2</th><th>Generator R</th><th>Observed R (TTT1)</th><th>Reported SpO2</th><th>Delta</th><th>Verdict</th></tr>
    </thead>
    <tbody>
    <tr><td>01_normal_rest</td><td>98</td><td>0.493</td><td>~0.49</td><td>99.0</td><td>+1.0</td><td><span class="badge badge-pass">PASS</span></td></tr>
    <tr><td>04_hypoxia_mild</td><td>92</td><td>0.703</td><td>~0.71</td><td>92.9</td><td>+0.9</td><td><span class="badge badge-pass">PASS</span></td></tr>
    <tr><td>05_hypoxia_moderate</td><td>85</td><td>0.947</td><td>~0.95</td><td>83.1</td><td>-1.9</td><td><span class="badge badge-pass">PASS</span></td></tr>
    <tr><td>06_hypoxia_severe</td><td>72</td><td>1.401</td><td>~1.40</td><td>74.1</td><td>+2.1</td><td><span class="badge badge-ok">OK</span></td></tr>
    <tr><td>26_hf_pulsus_alternans</td><td>92*</td><td>0.703</td><td>0.712</td><td>91.9</td><td>-0.1*</td><td><span class="badge badge-pass">PASS*</span></td></tr>
    <tr><td>32_hemorrhagic_shock</td><td>96</td><td>0.563</td><td>~0.56</td><td>96.9</td><td>+0.9</td><td><span class="badge badge-pass">PASS</span></td></tr>
    </tbody>
</table>
<p style="font-size:0.85em; color:var(--text-light);">* Scenario 26: script expects 96 but generator targets 92. Delta vs correct target shown.</p>

<h3>Key SpO2 Findings</h3>

<div class="finding-box" style="border-left-color: var(--success);">
    <strong>Major Improvement &mdash; Severe Hypoxia (Scenario 06):</strong> Previously FAIL with SpO2=85.3% (+13.3 delta). Now <strong>PASS</strong> with SpO2=74.1% (delta +2.1, rated OK). The selection bias and rolling average convergence issues that caused the +13.3 deviation appear resolved. SpO2 quality rate improved to 32.8% (was 12.1%).
</div>

<div class="finding-box" style="border-left-color: var(--success);">
    <strong>Improvement &mdash; Mild Hypoxia (Scenario 04):</strong> Previously WARN with SpO2=95.4% (+3.4 delta). Now <strong>PASS</strong> with SpO2=92.9% (delta +0.9). The +2 hardcoded offset bias and rolling average initialization issue appear resolved.
</div>

<div class="finding-box">
    <strong>Scenario 26 (pulsus_alternans):</strong> Measured SpO2=91.9 vs script expected 96 (WARN). However, the generator targets SpO2=92 (R=0.7025). TTT1 data shows R=0.712, giving SpO2~91 via tuned formula with slope_offset=-1.17. The firmware is measuring correctly. 64.6% SpO2 dropout is expected &mdash; pulsus alternans 0.6x weak beats fail quality checks. No venous pooling messages (BUG-2 not active). <strong>This is a test configuration error, not a firmware bug.</strong>
</div>

<h3>SpO2 Accuracy by Category</h3>
<table>
    <thead><tr><th>Category</th><th>Scenarios with SpO2</th><th>Mean Abs Delta</th><th>Pass Rate</th></tr></thead>
    <tbody>
    <tr><td>Normal (SpO2 &ge; 96%)</td><td>23</td><td>0.9</td><td>100%</td></tr>
    <tr><td>Mild Hypoxia (90-95%)</td><td>3</td><td>1.1</td><td>100%</td></tr>
    <tr><td>Severe Hypoxia (&lt; 90%)</td><td>2</td><td>2.0</td><td>100%</td></tr>
    </tbody>
</table>
<p style="font-size:0.85em; color:var(--text-light);">All SpO2 categories now pass. Previous severe hypoxia failure (scenario 06) and mild hypoxia bias (scenario 04) are resolved.</p>
</section>

<!-- ============================================================ -->
<!-- 5. HR DETAILED ANALYSIS -->
<!-- ============================================================ -->
<section id="hr-analysis">
<h2>5. HR Detailed Analysis</h2>

<h3>HR Doubling Evidence (BUG-3 Partial Fix)</h3>
<p>BUG-3 is now partially fixed. Scenarios 18 and 33 show accurate HR (ratios ~1.01). Scenarios 20 and 34 still show partial doubling but with reduced ratios (1.72 and 1.64 vs previous 2.145 and 2.006), limited by the slew rate limiter.</p>

<table>
    <thead><tr><th>Scenario</th><th>Expected HR</th><th>Measured HR</th><th>Ratio</th><th>Std Dev</th><th>Verdict</th><th>Previous</th></tr></thead>
    <tbody>
    <tr style="background: var(--success-bg);">
        <td>18_bradycardia</td><td>42</td><td>42.3</td><td>1.01</td><td>0.9</td><td><span class="badge badge-pass">PASS</span></td><td style="text-decoration:line-through; color:var(--fail);">FAIL (84.2, 2.005)</td>
    </tr>
    <tr style="background: var(--success-bg);">
        <td>33_hypothermia_32C</td><td>55</td><td>55.4</td><td>1.01</td><td>0.9</td><td><span class="badge badge-pass">PASS</span></td><td style="text-decoration:line-through; color:var(--fail);">FAIL (108.2, 1.967)</td>
    </tr>
    <tr style="background: var(--warn-bg);">
        <td>20_bav3_complete</td><td>33</td><td>56.7</td><td><span class="ratio-highlight">1.72</span></td><td>6.8</td><td><span class="badge badge-warn">WARN</span></td><td style="color:var(--fail);">FAIL (70.8, 2.145)</td>
    </tr>
    <tr style="background: var(--warn-bg);">
        <td>34_hypothermia_28C</td><td>35</td><td>57.3</td><td><span class="ratio-highlight">1.64</span></td><td>6.8</td><td><span class="badge badge-warn">WARN</span></td><td style="color:var(--fail);">FAIL (70.2, 2.006)</td>
    </tr>
    </tbody>
</table>

<div class="alert-box alert-warn">
    <strong>Remaining issue:</strong> For very low HR (&lt; 35 bpm), the FFT still picks up the dicrotic notch 2nd harmonic, but the slew rate limiter prevents full doubling, causing the HR to oscillate between the fundamental and 2nd harmonic. Only 3 of 60 activity records (5%) contain HR values for scenarios 20 and 34, indicating very poor detection rate at these extreme bradycardic rates.
</div>

<h3>HR Accuracy by Category</h3>
<table>
    <thead><tr><th>Category</th><th>Scenarios</th><th>Mean Abs Delta</th><th>Pass Rate</th><th>Notes</th></tr></thead>
    <tbody>
    <tr><td>Rest (60-100 bpm)</td><td>3</td><td>5.2</td><td>100%</td><td>Excellent accuracy</td></tr>
    <tr><td>Tachycardia (&gt;100 bpm)</td><td>6</td><td>4.9</td><td>100%</td><td>Good accuracy</td></tr>
    <tr><td>Bradycardia (42-55 bpm)</td><td>2</td><td>0.4</td><td>100%</td><td><strong>FIXED</strong> (was 0%)</td></tr>
    <tr style="background: var(--warn-bg);"><td>Severe Bradycardia (&lt;35 bpm)</td><td>2</td><td>23.0</td><td>0%</td><td>Partial doubling (BUG-3)</td></tr>
    <tr><td>Arrhythmias</td><td>8</td><td>3.3</td><td>100%</td><td>Excellent for AF, flutter, ESV</td></tr>
    <tr><td>Activity</td><td>3</td><td>5.6</td><td>100%</td><td>Good during motion</td></tr>
    </tbody>
</table>

<h3>Scenario 37 (venous_pooling) &mdash; False WARN</h3>
<div class="finding-box" style="border-left-color: var(--success);">
    <strong>Test configuration error:</strong> Expected HR in analysis script is 75 bpm, but the generator metadata specifies 55 bpm. Measured HR: 55.7 bpm (delta 0.7 from correct target = PASS). The green amplitude drops from ~940-1060 early in the simulation to ~32-43 at the end, reflecting the venous pooling DC level changes (1.25x normal baseline). HR remains stable throughout with 96.7% detection rate.
</div>
</section>

<!-- ============================================================ -->
<!-- 6. CARDIAC ARREST ANALYSIS -->
<!-- ============================================================ -->
<section id="cardiac-arrest-analysis">
<h2>6. Cardiac Arrest Detection Analysis</h2>

<div class="alert-box alert-fail">
    <strong>CRITICAL SAFETY FINDING:</strong> A <strong>watchdog timer initialization bug</strong> causes spurious <code>Cardiac Alarm4 ON</code> at startup with a bogus 1.7-billion-second silence duration in ALL cardiac arrest scenarios. This corrupts the alarm state: scenarios 21, 22, 24 have the alarm spuriously ON from the start (masking detection failures), while scenario 23 enters an alarm ON/OFF oscillation loop (815 cycles). BUG-4 and BUG-5 code fixes are present but the watchdog bug prevents proper independent operation of the amplitude-based and gap-based alarm paths. HR continues to be reported (50-177 bpm) during all arrest types.
</div>

<h3>Per-Scenario Timeline</h3>
<table>
    <thead>
    <tr><th>Scenario</th><th>Arrest Type</th><th>"Below Thresh"</th><th>Alarm4 ON</th><th>Alarm OFF</th><th>Recovery Rejected</th><th>HR During Arrest</th><th>Green Amp</th></tr>
    </thead>
    <tbody>
    <tr>
        <td>21_vf_from_sinus</td><td>VF</td><td>4</td><td style="color:var(--fail); font-weight:bold;">1 (spurious)</td><td>0</td><td>553</td><td>115-140 bpm</td><td>28-45</td>
    </tr>
    <tr>
        <td>22_vt_to_vf</td><td>VT&rarr;VF</td><td style="color:var(--fail); font-weight:bold;">0</td><td style="color:var(--fail); font-weight:bold;">1 (spurious)</td><td>0</td><td>614</td><td>104-177 bpm</td><td>461&rarr;28</td>
    </tr>
    <tr>
        <td>23_asystole</td><td>Asystole</td><td>56</td><td style="color:var(--fail); font-weight:bold;">815 (oscillating!)</td><td>814</td><td>9</td><td>50-96 bpm</td><td>32-47</td>
    </tr>
    <tr>
        <td>24_pea</td><td>PEA</td><td>2</td><td style="color:var(--fail); font-weight:bold;">1 (spurious)</td><td>0</td><td>582</td><td>64-83 bpm</td><td>29-39</td>
    </tr>
    </tbody>
</table>

<h3>Detection Analysis by Arrest Type</h3>

<div class="finding-box" style="border-left-color: var(--fail);">
    <strong>Scenario 23 (Asystole) &mdash; Worst Case:</strong> The watchdog alarm creates an oscillation loop with the recovery mechanism. Pattern: (1) Watchdog fires Alarm4 ON, (2) slow bradycardia rhythm (30-50 bpm) produces peaks every 1-2 seconds, (3) 8 consecutive above-threshold peaks pass recovery check (inter-peak timing 1-2s within 0.3-2.0s window), (4) Alarm OFF fires, (5) watchdog immediately re-fires Alarm4 ON. This repeats <strong>815 times</strong> during the 1-hour simulation. During actual asystole (last ~20 minutes), 56 below-thresh messages accumulate duration up to 133.4s, but the oscillating alarm state prevents sustained detection. The counter reaches n=2754 at one point. HR is reported as 50-96 bpm throughout including during asystole.
</div>

<div class="finding-box" style="border-left-color: var(--fail);">
    <strong>Scenario 22 (VT&rarr;VF) &mdash; Most Dangerous:</strong> <strong>Zero below-thresh messages</strong> across the entire simulation. During the VT phase, PPG amplitude is 444-461 (well above threshold 75) because VT produces organized ventricular contractions. During VF phase, amplitude drops to 28-38 but the spurious watchdog alarm prevents independent detection. The algorithm has <strong>no mechanism to detect VT</strong> &mdash; it fundamentally cannot distinguish VT from sinus tachycardia based solely on PPG amplitude. HR reaches 177 bpm during VF. A patient could be in pulseless VT (clinically dead) while the watch reports a "normal" high heart rate.
</div>

<div class="finding-box">
    <strong>Scenario 21 (VF from Sinus):</strong> Only 4 below-thresh messages with max duration 8.2s (below 10s minimum). The spurious watchdog alarm is already ON, masking the detection path. 553 "recovery rejected" messages confirm the VF noise generates peaks with 1-second spacing that accumulate above-threshold counts, but timing validation correctly rejects recovery. Green avg amp drops from ~800 to 28-45 during VF. HR reported as 115-140 bpm.
</div>

<div class="finding-box">
    <strong>Scenario 24 (PEA):</strong> The spurious watchdog alarm is already ON. Green avg amp correctly drops to 29-39 at PEA onset (well below threshold 75), confirming PPG detects loss of pulse. Only 2 below-thresh messages. 582 "recovery rejected" messages. HR reported as 64-83 bpm throughout PEA phase. PEA should be detectable by PPG (no mechanical pulse = no pulsation), but the corrupted alarm state prevents independent detection.
</div>

<h3>Additional Concerns</h3>
<ul>
    <li><strong>False HR during all arrest types:</strong> All 4 scenarios report HR 50-177 bpm during arrest phases. The internal FFT-based PR algorithm does not cross-check against PPG amplitude quality. The <code>HRM_filtered</code> buffer retains historical values and decays slowly.</li>
    <li><strong>False SpO2 during arrest:</strong> All scenarios report SpO2 96-98% during arrest &mdash; physiologically impossible.</li>
    <li><strong>LED auto-gain masks signal loss:</strong> When green amplitude drops from ~800 to ~35, LED power increases from 1% to 60%, making the signal appear "present" despite no pulse.</li>
    <li><strong>No HR suppression when alarm active:</strong> HR reporting logic at <code>mmt_process_fxi.c:~1628</code> does not check <code>corsano_cardiac_get_state()</code>.</li>
</ul>
</section>

<!-- ============================================================ -->
<!-- 7. RESULTS BY CATEGORY -->
<!-- ============================================================ -->
<section id="results-by-category">
<h2>7. Results by Category</h2>

<h3>Rest (Scenarios 01-03)</h3>
<div class="finding-box">
    <strong>3/3 PASS.</strong> HR accuracy excellent (&Delta; 0.9-10.7 bpm). SpO2 within &plusmn;1.0 points. Wearing detection works correctly (minute 1). Activity correctly classified as REST. No issues.
</div>

<h3>Hypoxia (Scenarios 04-06)</h3>
<div class="finding-box" style="border-left-color: var(--success);">
    <strong>3/3 PASS.</strong> <strong>Major improvement vs previous run (was 1 PASS, 1 WARN, 1 FAIL).</strong> Mild hypoxia (SpO2=92%): delta 0.9 (was 3.4). Moderate hypoxia (SpO2=85%): delta 1.9. Severe hypoxia (SpO2=72%): delta 2.1 (was 13.3). SpO2 accuracy across the full range is now within tolerance.
</div>

<h3>Activity (Scenarios 07-09)</h3>
<div class="finding-box">
    <strong>3/3 PASS.</strong> Walking and running HR within tolerance. SpO2 correctly suppressed during motion (movement rejection active). Step counting operational. Activity classification correct (WALK/RUN).
</div>

<h3>Arrhythmias (Scenarios 10-17)</h3>
<div class="finding-box">
    <strong>8/8 PASS.</strong> Excellent performance across AF (rapid and controlled), flutter, ESV (bigeminy/trigeminy), PSVT, VT monomorphic, and torsades. HR accuracy within 0.5-8.4 bpm. This remains the strongest category.
</div>

<h3>Bradycardia (Scenarios 18-20)</h3>
<div class="finding-box">
    <strong>2 PASS, 1 WARN.</strong> <strong>Improvement vs previous (was 1 PASS, 2 FAIL).</strong> Scenario 18 (42 bpm) now PASS with HR=42.3 (was FAIL at 84.2). Scenario 19 (Mobitz I, variable) PASS. Scenario 20 (33 bpm) still WARN with partial doubling (ratio 1.72, improved from 2.145). <strong>BUG-3 is fixed for HR &ge; 42 bpm but persists for HR &lt; 35 bpm.</strong>
</div>

<h3>Cardiac Arrest (Scenarios 21-24)</h3>
<div class="finding-box" style="border-left-color: var(--fail);">
    <strong>0/4 reliably detected. All 4 WARN.</strong> A newly discovered <strong>watchdog timer initialization bug</strong> fires a spurious Alarm4 at startup in all scenarios, corrupting the alarm state. Scenario 23 (asystole) is worst: 815 alarm ON/OFF oscillation cycles. BUG-4 and BUG-5 code fixes are present but the watchdog bug prevents proper operation. VF/VT blindness persists (scenarios 21, 22). HR 50-177 bpm reported during arrest. See <a href="#cardiac-arrest-analysis">Section 6</a>.
</div>

<h3>Cardiac Pathologies (Scenarios 25-31)</h3>
<div class="finding-box">
    <strong>6 PASS, 1 WARN.</strong> Scenario 26 (pulsus alternans) shows SpO2 WARN due to <strong>test configuration error</strong> (expected 96 should be 92). Firmware measures correctly at 91.9. All other pathologies pass: progressive deterioration, Cheyne-Stokes, aortic stenosis/regurgitation, HCM, tamponade.
</div>

<h3>Extreme Conditions (Scenarios 32-40)</h3>
<div class="finding-box">
    <strong>7 PASS, 2 WARN.</strong> <strong>Improvement vs previous (was 7 PASS, 2 FAIL).</strong> Scenario 33 (32&deg;C hypothermia) now PASS with HR=55.4 (was FAIL at 108.2). Scenario 34 (28&deg;C hypothermia) improved to WARN (HR 57.3, ratio 1.64, was FAIL at 70.2, ratio 2.006). Scenario 37 (venous pooling) WARN due to <strong>test config error</strong> (expected HR=75 should be 55). All others pass: hemorrhagic shock, sleep apnea, vasovagal, anemia, tremor, CO poisoning.
</div>
</section>

<!-- ============================================================ -->
<!-- 8. RECOMMENDATIONS -->
<!-- ============================================================ -->
<section id="recommendations">
<h2>8. Recommendations</h2>

<h3><span class="priority p1">P1</span> Patient Safety &mdash; Immediate Action Required</h3>
<table>
    <thead><tr><th>#</th><th>Action</th><th>File</th><th>Status</th><th>Impact</th></tr></thead>
    <tbody>
    <tr>
        <td>1</td>
        <td><strong>Fix watchdog timer initialization</strong> &mdash; initialize <code>last_peak_callback_time</code> to <code>TIME_SECONDS()</code> at cardiac monitoring start. Add 30-60s startup grace period. Add cooldown after Alarm4 to prevent oscillation.</td>
        <td><code>corsano_cardiac_arrest.c:~135</code></td>
        <td><span class="badge badge-fail">OPEN</span></td>
        <td>Eliminates spurious Alarm4 at startup, fixes alarm oscillation in scenario 23, enables proper independent detection</td>
    </tr>
    <tr>
        <td>2</td>
        <td><strong>Implement VF/VT detection modality</strong> &mdash; waveform regularity analysis (CV threshold) or frequency-domain VF classifier</td>
        <td><code>corsano_cardiac_arrest.c</code> (new logic)</td>
        <td><span class="badge badge-fail">OPEN</span></td>
        <td>Amplitude-threshold approach is blind to VF/VT. Scenarios 21, 22 have zero independent detection</td>
    </tr>
    <tr>
        <td>3</td>
        <td><strong>Suppress HR when PPG amplitude is below threshold</strong> &mdash; when green avg amp &lt; 100 for &gt; 10s, report HR=0 or indeterminate</td>
        <td><code>mmt_process_fxi.c:~1628</code>, <code>mmt_vital_algorithms.c</code></td>
        <td><span class="badge badge-fail">OPEN</span></td>
        <td>Prevents phantom HR (50-177 bpm) during cardiac arrest. Also suppress when <code>cardiac_arrest</code> state is active.</td>
    </tr>
    <tr style="opacity: 0.6; text-decoration: line-through;">
        <td>4</td>
        <td>Add alarm condition in invalid-pair branch &mdash; <strong style="text-decoration: none; color: var(--success);">DONE</strong></td>
        <td><code>corsano_cardiac_arrest.c:349-359</code></td>
        <td><span class="badge badge-pass">FIXED</span></td>
        <td>BUG-4 code fix present. Alarm3 ON path functional (masked by watchdog bug)</td>
    </tr>
    <tr style="opacity: 0.6; text-decoration: line-through;">
        <td>5</td>
        <td>Remove local variable shadow &mdash; <strong style="text-decoration: none; color: var(--success);">DONE</strong></td>
        <td><code>corsano_cardiac_arrest.c:233</code></td>
        <td><span class="badge badge-pass">FIXED</span></td>
        <td>BUG-5 fixed. Gap-based alarm functional (masked by watchdog bug)</td>
    </tr>
    </tbody>
</table>

<h3><span class="priority p2">P2</span> Algorithm Improvements</h3>
<table>
    <thead><tr><th>#</th><th>Action</th><th>File</th><th>Status</th><th>Impact</th></tr></thead>
    <tbody>
    <tr>
        <td>6a</td>
        <td>Lower bandpass filter cutoff from 0.7 Hz to 0.4 Hz (24 bpm)</td>
        <td><code>mmt_vital_algorithms.c:281-283</code></td>
        <td><span class="badge badge-warn">OPEN</span></td>
        <td>BUG-3 remaining: scenarios 20 (33 bpm) and 34 (35 bpm). Already fixed for 42-55 bpm.</td>
    </tr>
    <tr>
        <td>6b</td>
        <td>Lower FFT search floor from 45 bpm to 25 bpm (<code>LOW_BPM_50</code>)</td>
        <td><code>mmt_vital_algorithms.c:70</code></td>
        <td><span class="badge badge-warn">OPEN</span></td>
        <td>Allows detection of true fundamental for severe bradycardia</td>
    </tr>
    <tr>
        <td>6c</td>
        <td>Add sub-harmonic checking: if peak at f/2 has &gt;30% of peak at f, report f/2</td>
        <td><code>mmt_vital_algorithms.c:3585-3690</code></td>
        <td><span class="badge badge-warn">OPEN</span></td>
        <td>Most robust fix for dicrotic notch doubling</td>
    </tr>
    <tr style="opacity: 0.6; text-decoration: line-through;">
        <td>7</td>
        <td>Fix SpO2 selection bias at extreme R-ratios &mdash; <strong style="text-decoration: none; color: var(--success);">RESOLVED</strong></td>
        <td><code>mmt_vital_algorithms.c</code></td>
        <td><span class="badge badge-pass">FIXED</span></td>
        <td>Scenario 06 now PASS (SpO2 74.1 vs 72, was 85.3). Scenario 04 now PASS (SpO2 92.9 vs 92, was 95.4)</td>
    </tr>
    </tbody>
</table>

<h3><span class="priority p3">P3</span> Simulator / Tooling</h3>
<table>
    <thead><tr><th>#</th><th>Action</th><th>File</th><th>Status</th><th>Impact</th></tr></thead>
    <tbody>
    <tr>
        <td>8</td>
        <td>Fix expected values in analysis script: scenario 37 HR 75&rarr;55, scenario 26 SpO2 96&rarr;92</td>
        <td><code>analyze_golden_results.py:49,60</code></td>
        <td><span class="badge badge-warn">OPEN</span></td>
        <td>Eliminates 2 false WARNs. Would bring results to 34 PASS / 6 WARN / 0 FAIL</td>
    </tr>
    <tr>
        <td>9</td>
        <td>Fix <code>mmt_idle_detection</code> thresholds for oscillatory tremor (BUG-6)</td>
        <td><code>mmt_idle_detection.c:167-175</code></td>
        <td><span class="badge badge-warn">OPEN</span></td>
        <td>SpO2 suppressed during shivering/tremor (scenarios 33, 39 show SpO2=0). No verdict impact currently.</td>
    </tr>
    <tr>
        <td>10</td>
        <td>Scale <code>time_diff</code> threshold with HR: <code>threshold = max(4.0, 60.0/HR * 2.5)</code></td>
        <td><code>mmt_vital_algorithms.c:5989</code></td>
        <td><span class="badge badge-warn">OPEN</span></td>
        <td>Would enable SpO2 for scenario 34 (28&deg;C hypothermia) at very low HR</td>
    </tr>
    </tbody>
</table>
</section>

<!-- ============================================================ -->
<!-- 9. IMPACT MATRIX -->
<!-- ============================================================ -->
<section id="impact-matrix">
<h2>9. Impact Matrix</h2>

<table>
    <thead>
    <tr>
        <th>Bug ID</th>
        <th>Clinical Impact</th>
        <th>Patient Population</th>
        <th>Frequency</th>
        <th>Severity</th>
        <th>Priority</th>
    </tr>
    </thead>
    <tbody>
    <tr style="background: var(--fail-bg);">
        <td>NEW (Watchdog Timer)</td>
        <td>Spurious Alarm4 at startup corrupts alarm state. Scenario 23: 815 ON/OFF oscillations. Scenarios 21, 22, 24: alarm already ON masking detection failures. No reliable cardiac arrest detection in any scenario.</td>
        <td>All patients monitored for cardiac arrest</td>
        <td>100% of arrest scenarios (4/4)</td>
        <td style="color:var(--fail); font-weight:bold;">CRITICAL</td>
        <td><span class="priority p1">P1</span></td>
    </tr>
    <tr style="background: var(--fail-bg);">
        <td>VF/VT Blindness</td>
        <td>Amplitude-threshold detector blind to high-amplitude lethal arrhythmias. Zero independent detection for VF and VT. Patient in VT/VF would show HR 104-177 bpm.</td>
        <td>All patients experiencing VF or VT</td>
        <td>100% of VF/VT events (2/4 arrest scenarios)</td>
        <td style="color:var(--fail); font-weight:bold;">CRITICAL</td>
        <td><span class="priority p1">P1</span></td>
    </tr>
    <tr style="background: var(--fail-bg);">
        <td>HR During Arrest</td>
        <td>PSP algorithm reports HR 50-177 bpm during cardiac arrest when PPG amplitude is far below threshold. Misleading clinical data.</td>
        <td>All patients in cardiac arrest</td>
        <td>100% of arrest scenarios</td>
        <td style="color:var(--fail); font-weight:bold;">HIGH</td>
        <td><span class="priority p1">P1</span></td>
    </tr>
    <tr style="background: var(--warn-bg);">
        <td>BUG-3 (partial)</td>
        <td>Severe bradycardia (&lt; 35 bpm) shows partial HR doubling (ratios 1.64-1.72). Less severe than before (was 2.0x). Fixed for 42-55 bpm range.</td>
        <td>Elderly with AV block, severe hypothermia</td>
        <td>100% at HR &lt; 35 bpm (2 scenarios)</td>
        <td style="color:var(--warn); font-weight:bold;">MEDIUM</td>
        <td><span class="priority p2">P2</span></td>
    </tr>
    <tr>
        <td>BUG-6</td>
        <td>SpO2 suppressed during shivering/tremor due to motion detection mismatch</td>
        <td>Hypothermia, fever, Parkinson's</td>
        <td>Moderate (SpO2=0, no verdict impact)</td>
        <td>LOW</td>
        <td><span class="priority p3">P3</span></td>
    </tr>
    <tr>
        <td>Test Config (26, 37)</td>
        <td>2 false WARNs from incorrect expected values in analysis script. Firmware is accurate.</td>
        <td>N/A (tooling only)</td>
        <td>2 scenarios</td>
        <td>NONE</td>
        <td><span class="priority p3">P3</span></td>
    </tr>
    </tbody>
</table>

<div class="alert-box alert-info" style="margin-top: 20px;">
    <strong>Current Results:</strong> <strong>32 PASS (80.0%) / 8 WARN (20.0%) / 0 FAIL (0%)</strong>. <strong>Significant improvement</strong> from previous run (30/5/5). Zero FAILs for the first time. 5 previously failing scenarios now pass (18, 33, 06, 04, 32). BUG-3 partially fixed (scenarios 18, 33 now accurate). SpO2 biases resolved (scenarios 04, 06 now within tolerance). 2 of the 8 WARNs are test config errors (26, 37) &mdash; correcting these would yield <strong>34 PASS / 6 WARN / 0 FAIL</strong>. <strong>Next priority:</strong> fix cardiac arrest watchdog timer initialization (affects all 4 arrest scenarios) and implement VF/VT detection modality.
</div>
</section>

<footer>
    <p>CardioWatch 287-2B &mdash; Golden Data AI Analysis Report &mdash; Updated 2026-02-12 (v4)</p>
    <p>Corsano Health &mdash; Firmware Validation Suite</p>
    <p style="margin-top: 8px;">
        <a href="golden_data_analysis.html" style="color: var(--primary-light);">Automated Analysis</a> &nbsp;|&nbsp;
        <a href="golden_data_viewer.html" style="color: var(--primary-light);">Interactive Viewer</a>
    </p>
</footer>

</body>
</html>